



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="http://dib-lab.github.io/eelpond/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching pages">
      
        <meta name="lang:search.result.one" content="1 matching page">
      
        <meta name="lang:search.result.other" content="# matching page">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href=".">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.3">
    
    
      
        <title>eelpond</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#ab47bc">
      
    
    
      <script src="assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="css/custom.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="purple" data-md-color-accent="purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#eelpond" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://dib-lab.github.io/eelpond/" title="eelpond" class="md-header-nav__button md-logo">
          
            <i class="md-icon">dns</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                eelpond
              </span>
              <span class="md-header-nav__topic">
                About
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search this site" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching this site
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/dib-lab/eelpond" title="Go to repository" class="md-source" data-md-source="github">
    
    <div class="md-source__repository">
      eelpond
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="http://dib-lab.github.io/eelpond/" title="eelpond" class="md-nav__button md-logo">
      
        <i class="md-icon">dns</i>
      
    </a>
    eelpond
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/dib-lab/eelpond" title="Go to repository" class="md-source" data-md-source="github">
    
    <div class="md-source__repository">
      eelpond
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="." title="About" class="md-nav__link md-nav__link--active">
      About
    </a>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="QC/" title="Read Quality Trimming and Filtering" class="md-nav__link">
      Read Quality Trimming and Filtering
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Annotation/" title="Annotation" class="md-nav__link">
      Annotation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Diginorm/" title="Digital Normalization" class="md-nav__link">
      Digital Normalization
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Assembly/" title="Assembly" class="md-nav__link">
      Assembly
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Quality/" title="Quality Assessment" class="md-nav__link">
      Quality Assessment
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Quant/" title="Transcript Quantification" class="md-nav__link">
      Transcript Quantification
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="DE/" title="Differential Expression" class="md-nav__link">
      Differential Expression
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      For Developers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        For Developers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="dev_tips/" title="Notes for Developers" class="md-nav__link">
      Notes for Developers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="eelpond">EelPond<a class="headerlink" href="#eelpond" title="Permanent link">&para;</a></h1>
<h1 id="snakemake-update-of-the-eel-pond-protocol-for-de-novo-rnaseq-analysis">Snakemake update of the Eel Pond Protocol for <em>de novo</em> RNAseq analysis<a class="headerlink" href="#snakemake-update-of-the-eel-pond-protocol-for-de-novo-rnaseq-analysis" title="Permanent link">&para;</a></h1>
<div class="codehilite"><pre><span></span>                           ___
                        .-&#39;   `&#39;.
                       /         \
                      |           ;
                      |           |           ___.--,
             _.._     |O)  ~  (O) |    _.---&#39;`__.-( (_.       
      __.--&#39;`_.. &#39;.__.\      &#39;--. \_.-&#39; ,.--&#39;`     `&quot;&quot;`
     ( ,.--&#39;`   &#39;,__ /./;     ;, &#39;.__.&#39;`    __
     _`) )  .---.__.&#39; / |     |\   \__..--&quot;&quot;  &quot;&quot;&quot;--.,_
    `---&#39; .&#39;.&#39;&#39;-._.-&#39;`_./    /\ &#39;.  \_.-~~~````~~~-.__`-.__.&#39;
          | |  .&#39; _.-&#39; |    |  \  \  &#39;.
           \ \/ .&#39;     \    \   &#39;. &#39;-._)
            \/ /        \    \    `=.__`-~-.
            / /\         `)   )     / / `&quot;&quot;.`\
      , _.-&#39;.&#39;\ \        /   /     (  (   /  /
       `--~`  )  )    .-&#39;  .&#39;       &#39;.&#39;. |  (
             (/`     (   (`           ) ) `-;
              `       &#39;--;            (&#39; 
</pre></div>


<p>This is a lightweight protocol for assembling up to a few hundred million mRNAseq reads, annotating the resulting assembly, and doing differential expression analysis. The input is short-insert paired-end Illumina reads. This protocol can be run in a single command because it uses the snakemake automated workflow management system.</p>
<p>Previous versions of this protocol included line-by-line commands that the user could follow along with using a test dataset provided in the instructions. Since the recent development of <a href="https://snakemake.readthedocs.io/en/stable/">snakemake</a> workflow management tool and <a href="https://snakemake-wrappers.readthedocs.io/en/stable/">snakemake-wrappers</a> to manage sofware installation of commonly-used bioinformatics tools, we have re-implemented the Eel Pond Protocol to make it easier for users to install software and run a <em>de novo</em> transcriptome assembly, annotation, and quick differential expression analysis on a set of short-read Illumina data using a single command.</p>
<p>The software for this protocol can be found <a href="https://github.com/dib-lab/eelpond">here</a>. </p>
<h1 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h1>
<p>At the moment, only Linux is supported. OSX issues:
  - fastqc fails about half the time
  - Trinity assembler does not work</p>
<p>Install <a href="https://conda.io/miniconda.html">miniconda</a> (for Ubuntu 16.04 <a href="https://use.jetstream-cloud.org/application/images/107">Jetstream image</a>):</p>
<div class="codehilite"><pre><span></span>wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
bash Miniconda3-latest-Linux-x86_64.sh -b
echo export PATH=&quot;$HOME/miniconda3/bin:$PATH&quot; &gt;&gt; ~/.bash_profile
source ~/.bash_profile
</pre></div>


<p>Now, get the eelpond code</p>
<div class="codehilite"><pre><span></span>git clone https://github.com/dib-lab/eelpond.git
cd eelpond
</pre></div>


<p>Create a conda environment with all the dependencies for eelpond</p>
<div class="codehilite"><pre><span></span>conda env create --file ep_utils/eelpond_environment.yaml -n eelpond
</pre></div>


<p>Activate that environment. You'll need to do this anytime you want to run eelpond</p>
<div class="codehilite"><pre><span></span>source activate eelpond
</pre></div>


<p>Now you can start running eelpond!</p>
<p>To test a "full" workflow, consisting of read pre-processing, kmer trimming, Trinity assembly, dammit annotation and salmon quantification:</p>
<div class="codehilite"><pre><span></span>./run_eelpond nema-test full
</pre></div>


<p>These will run a small set of <em>Nematostella vectensis</em> test data (from <a href="https://evodevojournal.biomedcentral.com/articles/10.1186/2041-9139-4-16">Tulin et al., 2013</a>)</p>
<p>You can also run individual tools or subworkflows independently:</p>
<div class="codehilite"><pre><span></span>./run_eelpond nema-test preprocess
./run_eelpond nema-test trimmomatic
</pre></div>


<p>See the help, here:</p>
<div class="codehilite"><pre><span></span>./run_eelpond -h
</pre></div>


<p><strong>Running your own data:</strong></p>
<p>To run your own data, you'll need to create two files, a <code>tsv</code> file containing 
your sample info, and a <code>yaml</code> file containing basic configuration info. To start,
copy the test data files so you can modify them.</p>
<div class="codehilite"><pre><span></span>cp nema_samples.tsv &lt;my-tsv-name.tsv&gt;
</pre></div>


<p>Next, build a configfile to edit:</p>
<div class="codehilite"><pre><span></span>./run_eelpond config_name --build_config
</pre></div>


<p>This configfile will contain all the default paramters for each step of the pipeline you target.
If you don't specify any targets, it will default to the "full" pipeline, which executes read
preprocessing, assembly, annotation, and quantification.</p>
<p>Then, modify this configfile as necessary. 
The essential component is the <code>samples.tsv</code> file, which points <code>eelpond</code> to your sample files.</p>
<p><strong>References:</strong>  </p>
<ul>
<li><a href="https://khmer-protocols.readthedocs.io/en/ctb/mrnaseq/">original eel-pond protocol docs, last updated 2015</a></li>
<li><a href="http://eel-pond.readthedocs.io/en/latest/">eel-pond protocol docs, last updated 2016</a></li>
<li><a href="http://dibsi-rnaseq.readthedocs.io/en/latest/">DIBSI, nonmodel RNAseq workshop, July 2017</a></li>
<li><a href="http://rnaseq-workshop-2017.readthedocs.io/en/latest/index.html">SIO-BUG, nonmodel RNAseq workshop, October 2017</a></li>
</ul>
<p><strong>available workflows:</strong>  </p>
<ul>
<li>preprocess: Read Quality Trimming and Filtering (fastqc, trimmomatic)</li>
<li>kmer_trim: Kmer Trimming and/or Digital Normalization (khmer)</li>
<li>assemble: Transcriptome Assembly (trinity)</li>
<li>assemblyinput: Specify assembly for downstream steps</li>
<li>annotate : Annotate the transcriptome (dammit, sourmash)</li>
<li>quantify: Quantify transcripts (salmon) </li>
<li>full: preprocess, kmer_trim, assemble, annotate, quantify </li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
        
          <a href="QC/" title="Read Quality Trimming and Filtering" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Read Quality Trimming and Filtering
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 <a href="http://ivory.idyll.org/lab/">Lab for Data Intensive Biology</a> at UC Davis
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.e72fd936.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
        <script src="search/main.js"></script>
      
    
    
      
    
  </body>
</html>